<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="content-language" content="tr">
  <meta name="robots" content="index, follow">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2" />
  <meta name="format-detection" content="telephone=no">
  <title>Get Connected - My Profile</title>
  <link href="css/bootstrap.min.css" rel="stylesheet" />
  <link href="css/bootstrap.custom.css?1500034040" rel="stylesheet" media="screen" />
  <link href="css/plugins.custom.css?1500034040" rel="stylesheet" media="screen" />

  <link href="css/style.css" rel="stylesheet" media="screen" />
  <link rel="stylesheet" href="https://use.fontawesom~e.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

</head>
<body>
  <div class="section-pre-header">
    <div class="container">
      <div class="col-xs-12 col-md-3">
        <a href="homepage.html" class="logo"><img src="images/logo.jpg" alt="getconnected - logo" class="img-responsive" data-rjs="3" /></a>
        <a href="https://www.sjsu.edu" target="_blank"> <img src="images/logo.png" style="height:50px;"></a>
      </div>
      <div class="col-xs-12 col-md-9 no-padding-xs no-padding-sm" style="margin-top:25px;">
        <div class="top-wrapper">
          <a href="search.html" class="top-link"><i class="fa fa-search" aria-hidden="true" style="margin-right: 10px;"></i>Search Other Profiles</a>
          <a href="profile.html" class="top-link"><i class="fa fa-user" aria-hidden="true" style="margin-right: 10px;"></i>Myprofile</a>
          <a href="logout.html" class="top-link"><i class="fa fa-sign-out" aria-hidden="true" style="margin-right: 10px;"></i>Logout</a>
        </div>
        <div class="left-wrapper">
          <a href="faq.html" class="top-link">FAQ</a>
          <a href="contactus.html" class="top-link">Contact Us</a>
          <a href="FeedbackForm.html" class="top-link">Feedback</a>
        </div>
      </div>
    </div>
  </div>


  <div class="section section-home" style="margin-top:100px;margin-bottom:100px">
    <div class="row">
    <div class="container">
    <div class="card-body">
                <form>
                  <h6 class="heading-small text-muted mb-4">User information</h6>
                  <div class="pl-lg-4">
                    <div class="row">
                      <div class="col-md-12 text-center">
                        <img id="imageprofil" style="margin-bottom:10px;" src="images/images.jpeg" width="150px" class="profileimage img-thumbnail rounded mx-auto d-block" alt="">
                        <center>
                        <div style="width:350px;" class="form-group custom-file">
                        <label>Profile Photo</label>  <input id="photoinput" type="file" name="profilephoto"  accept="image/*"  class="form-control form-control-alternative custom-file-input" id="customFile">
                        </div>

                        <div style="width:350px;" class="form-group custom-file">
                          <label>Upload Your Resume</label>
                          <input id="cvinput" type="file" name="cvinput"  accept="*"  class="form-control form-control-alternative custom-file-input" id="cvinput">
                          <br><a style="font-weight:bold;text-decoration:underline" target="_blank" id="resumelink" href="#">Resume</a>  <br>
                        </div>


                      </center>
                      </div>
                      <div class="col-lg-6">
                        <input type="hidden" id="password" class="form-control form-control-alternative" placeholder="" >

                        <div class="form-group focused">
                          <label class="form-control-label" for="input-username">Username</label>
                          <input type="text" id="input-username" class="form-control form-control-alternative" placeholder="Username" >
                        </div>
                      </div>
                      <div class="col-lg-6">
                        <div class="form-group">
                          <label class="form-control-label" for="input-email">Email address</label>
                          <input type="email" id="input-email" class="form-control form-control-alternative" placeholder="jesse@example.com">
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-lg-6">
                        <div class="form-group focused">
                          <label class="form-control-label" for="input-first-name">First name</label>
                          <input type="text" id="input-first-name" class="form-control form-control-alternative" placeholder="First name" >
                        </div>
                      </div>
                      <div class="col-lg-6">
                        <div class="form-group focused">
                          <label class="form-control-label" for="input-last-name">Last name</label>
                          <input type="text" id="input-last-name" class="form-control form-control-alternative" placeholder="Last name" >
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-lg-6">
                        <div class="form-group focused">
                          <label class="form-control-label" for="input-Interest">Interest</label>
                          <input type="text" id="input-interest" class="form-control form-control-alternative" placeholder="Interest" >
                        </div>
                      </div>
                      <div class="col-lg-6">
                        <div class="form-group focused">
                          <label class="form-control-label" for="input-last-name">Work Experience</label>
                          <input type="text" id="input-work" class="form-control form-control-alternative" placeholder="Work Experience" >
                        </div>
                      </div>

                      <div class="col-lg-6">
                        <div class="form-group focused">
                          <label class="form-control-label" for="input-Interest">Status</label>
                          <select id="status" name="status" class="form-control  custom-select">
                          <option value="Student" selected>Student</option>
                          <option value="Alumni">Alumni</option>
                          <option value="Faculty">Faculty</option>
                          <option value="Employer">Employer</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-lg-6">
                        <div class="form-group focused">
                          <label class="form-control-label" for="input-Interest">Work Place</label>
                          <input type="text" id="input-workplace" class="form-control form-control-alternative" placeholder="Work Place" >
                        </div>
                      </div>


                    </div>



                  </div>
                  <hr class="my-4">
                  <!-- Address -->
                  <h6 class="heading-small text-muted mb-4">Contact information</h6>
                  <div class="pl-lg-4">
                    <div class="row">
                      <div class="col-md-12">
                        <div class="form-group focused">
                          <label class="form-control-label" for="input-address">Address</label>
                          <input id="input-address" class="form-control form-control-alternative" placeholder="Home Address" type="text">
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-lg-3">
                        <div class="form-group focused">
                          <label class="form-control-label" for="input-city">City</label>
                          <input type="text" id="input-city" class="form-control form-control-alternative" placeholder="City" >
                        </div>
                      </div>
                      <div class="col-lg-3">
                        <div class="form-group focused">
                          <label class="form-control-label" for="input-states">State</label>
                          <input type="text" id="input-states" class="form-control form-control-alternative" placeholder="State" >
                        </div>
                      </div>
                      <div class="col-lg-3">
                        <div class="form-group focused">
                          <label class="form-control-label" for="input-country">Country</label>
                          <input type="text" id="input-country" class="form-control form-control-alternative" placeholder="Country" >
                        </div>
                      </div>
                      <div class="col-lg-3">
                        <div class="form-group">
                          <label class="form-control-label" for="input-country">Postal code</label>
                          <input type="number" id="input-postal-code" class="form-control form-control-alternative" >
                        </div>
                      </div>
                    </div>
                  </div>
                  <hr class="my-4">
                  <!-- Description -->
                  <h6 class="heading-small text-muted mb-4">About me</h6>
                  <div class="pl-lg-4">
                    <div class="form-group focused">
                      <label>About Me</label>
                      <textarea id="aboutme" rows="4" class="form-control form-control-alternative" placeholder="A few words about you ..."></textarea>
                    </div>
                  </div>

                </form>
                <div class="row text-right">
                <div class="col-md-12">
                    <button id="profileupdate" class="button button-wapasha button-round-1 button-shadow">Update Profile </button>
                  </div>
                  </div>

              </div>
            </div>
              </div>
              <div class="clearfix"></div>

  </div>

<div class="clearfix"></div>
  <div class="section-footer">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-sm-7 col-md-8 no-padding-xs">
          <div class="bg-grey">
            <div class="margin-bottom-20"><img src="~/Content/assets/images/logoFooter.png" alt="" class="img-responsive"></div>
            <div class="margin-bottom-10"> </div>
            <p class="wide no-margin-bottom"> </p><br /><p>Get Connected - 2020   <a href="https://www.sjsu.edu" target="_blank"><img src="images/logo.png" style="margin-top:-10px;height:40px;"></a></p>
          </div>
        </div>

        <div style="margin-top: 50px;" class="hidden-xs hidden-sm col-md-2">
          <div class="row">

            <div class="col-xs-8 margin-top-15">
              <ul class="list-unstyled list-custom">
                <li><a href="profile.html">My Profile</a></li>
                <li><a href="FeedbackForm.html">Feedback</a></li>
              </ul>
            </div>

          </div>
        </div>

        <div style="margin-top: 50px;" class="col-xs-12 col-sm-5 col-md-2 no-padding-xs">
          <ul class="list-unstyled list-custom no-margin-bottom">
            <li><a href="contactus.html"  rel="nofollow"> Contact Us</a></li>
            <li><a href="faq.html"  rel="nofollow">FAQ</a></li></ul>
        </div>
      </div>
    </div>

  </div>
  <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-analytics.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-storage.js"></script>

  <script src="js/script.js"></script>
  <script>


  var username = $("#input-username");
  var email = $("#input-email");
  var firstname = $("#input-first-name");
  var lastname = $("#input-last-name");
  var adress = $("#input-address");
  var city = $("#input-city");
  var country = $("#input-country");
  var postal = $("#input-postal-code");
  var aboutme = $("#aboutme");
  var password =  $("#password");
  var interest =  $("#input-interest");
  var work =  $("#input-work");
  var userId = getCookie("userId");
  var state = $("#input-states");
  var workplace = $("#input-workplace");

  firebase.database().ref('/users/' + userId).once('value').then(function(userget) {

    username.val(userget.val().username);
    email.val(userget.val().email);
    firstname.val(userget.val().firstname);
    lastname.val(userget.val().lastname);
    adress.val(userget.val().adress);
    city.val(userget.val().city);
    country.val(userget.val().country);
    postal.val(userget.val().postal);
    aboutme.val(userget.val().aboutme);
    password.val(userget.val().password);
    interest.val(userget.val().interest);
    state.val(userget.val().state);
    work.val(userget.val().work);

    var status = userget.val().status;
    if(status != "" || status != undefined){
      $('#status option').filter(function() {
    return ($(this).text() == status); //To select Blue
    }).prop('selected', true);
    if(status == "Employer"){
      workplace.val(userget.val().workplace).prop('disabled', false);;
    }else{
      workplace.val("San Jose State University").prop('disabled', true);
    }
    }

    $('#status').on('change', function (e) {
    var optionSelected = $("option:selected", this);
    var valueSelected = this.value;
    if(valueSelected == "Employer"){
      workplace.val("").prop('disabled', false);;
    }else{
      workplace.val("San Jose State University").prop('disabled', true);;
    }
  });


    var storageRef = firebase.storage().ref('photos/'+userId)
    var storageInput = firebase.storage().ref('resume/'+userId)
    storageRef.getDownloadURL().then(function(url) {
      console.log(url)
      $("#imageprofil").attr("src", url);
  });

  storageInput.getDownloadURL().then(function(url) {
    console.log(url)
    $("#resumelink").attr("href", url);
});

  });


 var storageRef = firebase.storage().ref('photos/'+userId)
 var storageInput = firebase.storage().ref('resume/'+userId)
 var fileUpload = document.getElementById("photoinput")
 var cvUpload = document.getElementById("cvinput")

 fileUpload.addEventListener('change', function(evt) {
     var firstFile = evt.target.files[0]
     document.getElementById('imageprofil').src = window.URL.createObjectURL(this.files[0])
     var uploadTask = storageRef.put(firstFile)
     alert("Photo Updateded !");
  })

  cvUpload.addEventListener('change', function(evt) {
      var firstFile = evt.target.files[0]
      var uploadTask = storageInput.put(firstFile)
      document.getElementById('resumelink').href = window.URL.createObjectURL(this.files[0])
      alert("Uploaded your resume!");
   })





  </script>

</body>
</html>
